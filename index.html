<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wizard Chess</title>
    <link rel="stylesheet" href="css/style.css" />
    <!-- Chess.js library for game logic -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <!-- Add this line to include Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
  </head>
  <body>
    <!-- Main Menu -->
    <div class="main-menu" id="main-menu">
      <!-- Background image with @ symbol removed -->
      <img
        src="mainMenuBackground.png"
        alt="Background"
        class="menu-background"
      />

      <!-- Wizard image with @ symbol removed -->
      <img src="mainMenuWizard.png" alt="Wizard" class="menu-wizard" />

      <!-- Menu content - centered -->
      <div class="menu-content">
        <h1 class="game-title" data-text="Wizard Chess">Wizard Chess</h1>
        <div class="menu-options">
          <div class="menu-option-group">
            <h3>Play as</h3>
            <div class="color-selector">
              <label class="color-option">
                <input type="radio" name="player-color" value="w" checked />
                <span class="color-label"
                  ><img src="./Chess_Sprites/w_king.png" alt="White" />
                  White</span
                >
              </label>
              <label class="color-option">
                <input type="radio" name="player-color" value="b" />
                <span class="color-label"
                  ><img src="./Chess_Sprites/b_king.png" alt="Black" />
                  Black</span
                >
              </label>
            </div>
          </div>

          <div class="menu-option-group">
            <h3>Difficulty</h3>
            <select id="menu-difficulty">
              <option value="1">Apprentice</option>
              <option value="2" selected>Adept</option>
              <option value="3">Master</option>
              <option value="4">Archmage</option>
            </select>
          </div>

          <button id="play-computer" class="menu-button">
            <i class="fas fa-chess-knight"></i> Play Against Computer
          </button>
          <button id="play-local" class="menu-button">
            <i class="fas fa-chess-board"></i> Local Play
          </button>
        </div>
      </div>

      <!-- Version tag -->
      <div class="version-tag">Wizard Chess v1.0</div>
    </div>

    <!-- Game Container (hidden initially) -->
    <div class="game-container" id="game-container" style="display: none">
      <div
        class="game-background"
        style="
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: url('mainMenuBackground.png');
          background-size: cover;
          background-position: center;
          opacity: 0.6;
          z-index: 1;
        "
      ></div>
      <div class="game-area">
        <div class="board-container">
          <div id="board" class="chess-board"></div>
          <div id="promotion-selection" class="hidden promotion-dialog">
            <h3>Choose a piece:</h3>
            <div class="promotion-options">
              <div class="promotion-piece" data-piece="q"></div>
              <div class="promotion-piece" data-piece="r"></div>
              <div class="promotion-piece" data-piece="b"></div>
              <div class="promotion-piece" data-piece="n"></div>
            </div>
          </div>
        </div>
        <div class="side-panel">
          <div class="difficulty-selector">
            <h3>Bot Difficulty</h3>
            <select id="difficulty">
              <option value="1">Apprentice</option>
              <option value="2" selected>Adept</option>
              <option value="3">Master</option>
              <option value="4">Archmage</option>
            </select>
          </div>

          <div class="status-board">
            <div id="game-status">White to move</div>
            <div id="captured-pieces">
              <div id="captured-black" class="captured"></div>
              <div id="captured-white" class="captured"></div>
            </div>
          </div>

          <div class="move-history">
            <h3>Move History</h3>
            <div id="moves" class="moves-list"></div>
          </div>

          <div class="game-controls">
            <button id="return-to-menu">
              <i class="fas fa-home"></i> Main Menu
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="hidden">
      <div class="modal-content">
        <h2 id="game-result">Game Over</h2>
        <p id="result-message"></p>
        <div class="modal-buttons">
          <button id="play-again">Play Again</button>
          <button id="modal-menu">Main Menu</button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      window.addEventListener("load", function () {
        if (typeof Chess === "undefined") {
          console.error("Chess.js failed to load");
          alert(
            "Failed to load chess engine. Please check your internet connection and try again."
          );
        } else {
          console.log("Chess.js loaded successfully");
        }
      });
    </script>
    <script src="js/board.js"></script>
    <script src="js/engine.js"></script>
    <script src="js/game.js"></script>
    <script src="js/menu.js"></script>
  </body>
</html>
